/*! For license information please see 513.0d83de9b.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbrava=self.webpackChunkbrava||[]).push([[513,156],{8416:(e,a,s)=>{s.r(a),s.d(a,{default:()=>p});var t=s(2791),i=s(7689),n=s(184);const l=e=>{let{handleCloseModal:a}=e;const[s,i]=(0,t.useState)("Upload Profile Picture"),[l,o]=(0,t.useState)("Upload Background Image"),c=(e,a)=>{const s=new FileReader;s.onload=e=>{localStorage.setItem(a,e.target.result)},s.readAsDataURL(e)};return(0,n.jsxs)("div",{className:"upload-modal",children:[(0,n.jsx)("button",{className:"modal-close-button",onClick:a,children:"\xd7"}),(0,n.jsx)("h2",{className:"title",children:"Profile Picture"}),(0,n.jsx)("h3",{className:"subtitle",children:"Upload your profile picture"}),(0,n.jsxs)("div",{className:"profile-picture-container",children:[(0,n.jsx)("input",{type:"file",name:"profilePicture",id:"profilePictureInput",accept:"image/*",onChange:e=>{const a=e.target.files[0];a&&(i(a.name),c(a,"profileImageURL"))},className:"file-input"}),(0,n.jsx)("label",{htmlFor:"profilePictureInput",className:"file-label",children:s})]}),(0,n.jsx)("h2",{className:"title",children:"Background Image"}),(0,n.jsx)("h3",{className:"subtitle",children:"Upload your background image"}),(0,n.jsxs)("div",{className:"profile-picture-container",children:[(0,n.jsx)("input",{type:"file",name:"backgroundImage",id:"backgroundImageInput",accept:"image/*",onChange:e=>{const a=e.target.files[0];a&&(o(a.name),c(a,"backgroundImageURL"))},className:"file-input"}),(0,n.jsx)("label",{htmlFor:"backgroundImageInput",className:"file-label",children:l})]}),(0,n.jsx)("input",{type:"button",name:"submit",className:"submit action-button",value:"Submit",onClick:()=>{localStorage.removeItem("profileImageUrl"),localStorage.removeItem("backgroundImageUrl");const e=document.getElementById("profilePictureInput"),s=document.getElementById("backgroundImageInput");if(e&&e.files.length>0){const a=e.files[0];localStorage.setItem("profileImageUrl",a.name),console.log("Profile Picture saved to localStorage:",a.name)}if(s&&s.files.length>0){const e=s.files[0];localStorage.setItem("backgroundImageUrl",e.name),console.log("Background Image saved to localStorage:",e.name)}a()}})]})};var o=s(5294),c=s(8329),r=s(3712);const p=()=>{const[e,a]=(0,t.useState)(1),[s,p]=(0,t.useState)("Profile Picture"),[d,m]=(0,t.useState)("Background Image"),[u,g]=(0,t.useState)(!1),[h,f]=(0,t.useState)({name:"",email:"",company:"",phone:"",position:"",instagram:"",url:"",facebook:"",linkedin:"",image:"",background_image:"",tiktok:"",spotify:"",twitter:"",paypal:"",vinted:"",notes:"",standvirtual:"",olx:"",piscapisca:"",custojusto:""}),x=(0,i.s0)(),{id:v}=(0,i.UO)(),j=(0,t.useMemo)((()=>"".concat(h.profilePicture,"-").concat(h.background_image)),[h.profilePicture,h.background_image]);(0,t.useEffect)((()=>{c.Z.get("session_token")||x("/login")}),[x]),(0,t.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("formData"));e&&f(e);const a=localStorage.getItem("profileImageURL"),s=localStorage.getItem("backgroundImageURL");a&&f((e=>({...e,profilePicture:a}))),s&&f((e=>({...e,background_image:s})))}),[]);const y=e=>{const a=e.target.files[0];if(a){const s=e.target.name;if("profilePicture"===s){p(a.name);const e=new FileReader;e.onload=e=>{localStorage.setItem("profileImageURL",e.target.result)},e.readAsDataURL(a)}else if("backgroundImage"===s){m(a.name);const e=new FileReader;e.onload=e=>{localStorage.setItem("backgroundImageURL",e.target.result)},e.readAsDataURL(a)}}},k=e=>{const{name:a,value:s}=e.target;f((e=>({...e,[a]:s})))},b=async e=>{e.preventDefault();const a=new FormData;a.append("name",h.name),a.append("email",h.email),a.append("company",h.company),a.append("position",h.position),a.append("phone",h.phone),a.append("instagram",h.instagram),a.append("facebook",h.facebook),a.append("linkedin",h.linkedin),a.append("url",h.url),a.append("userId",v),a.append("tiktok",h.tiktok),a.append("spotify",h.spotify),a.append("twitter",h.twitter),a.append("paypal",h.paypal),a.append("vinted",h.vinted),a.append("notes",h.notes),a.append("standvirtual",h.standvirtual),a.append("olx",h.olx),a.append("piscapisca",h.piscapisca),a.append("custojusto",h.custojusto);const s=localStorage.getItem("profileImageUrl");s&&(console.log("Profile Picture:",s),a.append("profilePicture",s));const t=localStorage.getItem("backgroundImage");t&&(console.log("Background Image:",t),a.append("background_image",t)),console.log("Form Data:",a);try{const e=await o.Z.post("https://".concat("app.bravanfc.com","/api//api/createcard"),a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});201===e.status||204===e.status?(localStorage.removeItem("formData"),localStorage.removeItem("profileImageURL"),localStorage.removeItem("backgroundImageURL"),x("/".concat(e.data.userId,"/dashboard/cards"))):(console.error("Error creating card:",e.data),alert("Error creating card"))}catch(i){console.log("Error creating card",i),alert("There was an error creating your card",i)}};return(0,n.jsx)("div",{className:"createcard-container",children:(0,n.jsxs)("div",{className:"msform",children:[u&&(0,n.jsx)(l,{handleImageChange:y,handleImageChanges:e=>{const a=e.target.files[0];a?(m(a.name),f((e=>({...e,background_image:a.name})))):m("Background Image")},handleCloseModal:()=>{g(!1)},handleSubmit:b,handlePrevious:()=>g(!1)}),(0,n.jsx)("div",{className:"createcard-container",children:(0,n.jsxs)("div",{className:"card-content",children:[(0,n.jsx)("div",{className:"side-navigation",children:(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{className:e>=1?"active":"",children:"Card Setup"}),(0,n.jsx)("li",{className:e>=2?"active":"",children:"Social Media"})]})}),(0,n.jsx)("div",{className:"msform",children:(0,n.jsxs)("form",{id:"msform",onSubmit:b,encType:"multipart/form-data",children:[1===e&&(0,n.jsxs)("fieldset",{children:[(0,n.jsx)("h2",{className:"fs-title",children:"Setup your data"}),(0,n.jsx)("p",{className:"fs-subtitle",children:"We'll guide you through the process of adding the data displayed in your card"}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)("div",{className:"col",children:[(0,n.jsx)("label",{children:"Name"}),(0,n.jsx)("input",{type:"text",name:"name",placeholder:"Name",value:h.name,onChange:k,required:!0})]}),(0,n.jsxs)("div",{className:"col",children:[(0,n.jsx)("label",{children:"Email"}),(0,n.jsx)("input",{type:"text",name:"email",placeholder:"Email",value:h.email,onChange:k,required:!0})]}),(0,n.jsxs)("div",{className:"col",children:[(0,n.jsx)("label",{children:"Phone"}),(0,n.jsx)("input",{type:"tel",name:"phone",placeholder:"Phone",value:h.phone,onChange:k,required:!0})]})]}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)("div",{className:"col",children:[(0,n.jsx)("label",{children:"Company"}),(0,n.jsx)("input",{type:"text",name:"company",placeholder:"Company (optional)",value:h.company,onChange:k})]}),(0,n.jsxs)("div",{className:"col",children:[(0,n.jsx)("label",{children:"Position"}),(0,n.jsx)("input",{type:"text",name:"position",placeholder:"Position (optional)",value:h.position,onChange:k})]})]}),(0,n.jsx)("div",{className:"row",children:(0,n.jsxs)("div",{className:"col",children:[(0,n.jsx)("label",{children:"Address"}),(0,n.jsx)("input",{type:"text",name:"address",placeholder:"Address",value:h.address,onChange:k,style:{float:"left"}})]})}),(0,n.jsx)("div",{className:"row",children:(0,n.jsxs)("div",{className:"profile-picture-container",children:[(0,n.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/upload.png?v=1713209450",alt:"Upload Icon",className:"upload-icon"}),(0,n.jsx)("input",{name:"profilePicture",id:"profilePictureInput",onChange:y,className:"file-input",onClick:()=>{g(!0)}}),(0,n.jsx)("label",{htmlFor:"profilePictureInput",className:"file-label",children:s})]})}),(0,n.jsx)("div",{className:"col",children:(0,n.jsx)("input",{type:"button",name:"next",className:"next action-button",value:"Next",onClick:()=>{a(e+1)}})})]}),2===e&&(0,n.jsxs)("fieldset",{children:[(0,n.jsx)("h2",{className:"fs-title",children:"Social Profiles"}),(0,n.jsx)("h3",{className:"fs-subtitle",children:"Your presence on the social network"}),(0,n.jsxs)("div",{className:"social-input-container-wrapper",children:[(0,n.jsxs)("div",{className:"social-input-container",children:[(0,n.jsxs)("div",{className:"social-input",children:[(0,n.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/icons8-instagram.svg?v=1712083465",className:"social",alt:"Instagram"}),(0,n.jsx)("input",{type:"text",name:"instagram",placeholder:"Instagram",value:h.instagram,onChange:k})]}),(0,n.jsxs)("div",{className:"social-input",children:[(0,n.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/icons8-facebook.svg?v=1712083465",className:"social",alt:"Facebook"}),(0,n.jsx)("input",{type:"text",name:"facebook",placeholder:"Facebook",value:h.facebook,onChange:k})]}),(0,n.jsxs)("div",{className:"social-input",children:[(0,n.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/icons8-linkedin.svg?v=1712083465",className:"social",alt:"LinkedIn"}),(0,n.jsx)("input",{type:"text",name:"linkedin",placeholder:"Linkedin",value:h.linkedin,onChange:k})]}),(0,n.jsxs)("div",{className:"social-input",children:[(0,n.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/url.png?v=1712083467",className:"social",alt:"URL"}),(0,n.jsx)("input",{type:"text",name:"url",placeholder:"Url",value:h.url,onChange:k})]}),(0,n.jsxs)("div",{className:"social-input",children:[(0,n.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/tiktok.png?v=1713213933",className:"social",alt:"tiktok"}),(0,n.jsx)("input",{type:"text",name:"tiktok",placeholder:"tiktok",value:h.tiktok,onChange:k})]}),(0,n.jsxs)("div",{className:"social-input",children:[(0,n.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/spotify_bcf3311d-41be-49a9-8cec-d1bdc9363c4d.png?v=1713213932",className:"social",alt:"Spotify"}),(0,n.jsx)("input",{type:"text",name:"spotify",placeholder:"spotify",value:h.spotify,onChange:k})]})]}),(0,n.jsxs)("div",{className:"social-input",children:[(0,n.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/twitter.svg?v=1713213932",className:"social",alt:"Twitter"}),(0,n.jsx)("input",{type:"text",name:"twitter",placeholder:"Twitter",value:h.twitter,onChange:k})]}),(0,n.jsxs)("div",{className:"social-input",children:[(0,n.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/paypal.png?v=1713213933",className:"social",alt:"paypal"}),(0,n.jsx)("input",{type:"text",name:"paypal",placeholder:"paypal",value:h.paypal,onChange:k})]}),(0,n.jsxs)("div",{className:"social-input",children:[(0,n.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/Vinted.png?v=1713213932",className:"social",alt:"vinted",style:{width:"100px",height:"60px",marginRight:"-20px",marginLeft:"-20px"}}),(0,n.jsx)("input",{type:"text",name:"vinted",placeholder:"vinted",value:h.vinted,onChange:k})]}),(0,n.jsxs)("div",{className:"social-input",children:[(0,n.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/standvirtual.png?v=1713213933",className:"social",alt:"standvirtual"}),(0,n.jsx)("input",{type:"text",name:"standvirtual",placeholder:"standvirtual",value:h.standvirtual,onChange:k})]}),(0,n.jsxs)("div",{className:"social-input",children:[(0,n.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/olx.png?v=1713213932",className:"social",alt:"olx"}),(0,n.jsx)("input",{type:"text",name:"olx",placeholder:"olx",value:h.olx,onChange:k})]}),(0,n.jsxs)("div",{className:"social-input",children:[(0,n.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/piscapisca.png?v=1713213932",className:"social",alt:"piscapisca"}),(0,n.jsx)("input",{type:"text",name:"piscapisca",placeholder:"piscapisca",value:h.piscapisca,onChange:k})]}),(0,n.jsxs)("div",{className:"social-input",children:[(0,n.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/custojusto.png?v=1713213932",className:"social",alt:"custojusto",style:{width:"100px",height:"60px",marginRight:"-35px",marginLeft:"-20px"}}),(0,n.jsx)("input",{type:"text",name:"custojusto",placeholder:"custojusto",value:h.custojusto,onChange:k})]}),(0,n.jsxs)("div",{className:"social-input",children:[(0,n.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/notes.png?v=1713213932",className:"social",alt:"notes"}),(0,n.jsx)("input",{type:"text",name:"notes",placeholder:"notes",value:h.notes,onChange:k})]})]}),(0,n.jsx)("input",{type:"button",name:"previous",className:"previous action-button",value:"Previous",onClick:()=>{a(e-1)}}),(0,n.jsx)("input",{type:"submit",name:"submit",className:"next action-button",value:"Submit",onClick:b})]})]})}),(0,n.jsx)("div",{className:"createcard-component",children:(0,n.jsx)(r.default,{email:h.email,username:h.name,phone:h.phone,company:h.company,title:h.position,instagram:h.instagram,facebook:h.facebook,linkedin:h.linkedin,url:h.url,notes:h.notes,background_image_url:h.background_image,profile_image_url:h.profilePicture,address:h.address,tiktok:h.tiktok,spotify:h.spotify,twitter:h.twitter,paypal:h.paypal,vinted:h.vinted,standvirtual:h.standvirtual,olx:h.olx,piscapisca:h.piscapisca,custojusto:h.custojusto},j)})]})})]})})}},8329:(e,a,s)=>{function t(e){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var t in s)e[t]=s[t]}return e}s.d(a,{Z:()=>i});var i=function e(a,s){function i(e,i,n){if("undefined"!==typeof document){"number"===typeof(n=t({},s,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var o in n)n[o]&&(l+="; "+o,!0!==n[o]&&(l+="="+n[o].split(";")[0]));return document.cookie=e+"="+a.write(i,e)+l}}return Object.create({set:i,get:function(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var s=document.cookie?document.cookie.split("; "):[],t={},i=0;i<s.length;i++){var n=s[i].split("="),l=n.slice(1).join("=");try{var o=decodeURIComponent(n[0]);if(t[o]=a.read(l,o),e===o)break}catch(c){}}return e?t[e]:t}},remove:function(e,a){i(e,"",t({},a,{expires:-1}))},withAttributes:function(a){return e(this.converter,t({},this.attributes,a))},withConverter:function(a){return e(t({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(s)},converter:{value:Object.freeze(a)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}}]);
//# sourceMappingURL=513.0d83de9b.chunk.js.map