"use strict";(self.webpackChunkbrava=self.webpackChunkbrava||[]).push([[106,812],{7361:(e,a,s)=>{s.r(a),s.d(a,{default:()=>u});var n=s(2791),t=s(7689),c=s(5294),i=s(8329),l=s(175),o=s(59),r=s(3342),d=s(184);const u=function(){const{id:e}=(0,t.UO)(),[a,s]=(0,n.useState)(null),[u,m]=(0,n.useState)([]),[p,h]=(0,n.useState)(!0),[x,v]=(0,n.useState)(!1),j=(0,t.s0)();return(0,n.useEffect)((()=>{i.Z.get("session_token")||j("/login")}),[j]),(0,n.useEffect)((()=>{c.Z.get("https://".concat("app.bravanfc.com","/api/").concat(e,"/dashboard/cards"),{withCredentials:!0}).then((e=>{s(e.data),m(e.data.cards),h(!1)})).catch((e=>{console.error("Error fetching cards:",e),e.response&&400===e.response.status?(s({}),h(!1)):h(!1)})).finally((()=>{h(!1)}))}),[e,x]),null===a?(0,d.jsxs)("div",{className:"cards-container",children:[(0,d.jsx)(l.Z,{}),p&&(0,d.jsx)("div",{className:"spinner-container",children:(0,d.jsx)("div",{className:"spinner"})}),(0,d.jsx)("div",{className:"nav-tiles"})]}):(0,d.jsxs)("div",{className:"cards-container",children:[(0,d.jsx)(l.Z,{}),p&&(0,d.jsx)("div",{className:"spinner-container",children:(0,d.jsx)("div",{className:"spinner"})}),0===Object.keys(a).length?(0,d.jsx)(r.default,{setSubmissionSuccess:v}):null,(0,d.jsx)("div",{className:"nav-tiles",children:(0,d.jsx)("div",{className:"tiles",children:!p&&u.map((e=>(0,d.jsx)(o.default,{...e},e.card_id)))})})]})}},175:(e,a,s)=>{s.d(a,{Z:()=>o});var n=s(2791),t=s(8008),c=s(7689),i=s(9823),l=s(184);const o=function(e,a){const{activeTab:s}=e,{id:o}=(0,c.UO)(),r=(0,c.s0)(),[d,u]=(0,n.useState)(!1),m=window.innerWidth<=1e3,p=(0,n.useRef)(null),h=localStorage.getItem("username"),x=localStorage.getItem("profile_image_url");(0,n.useEffect)((()=>{const e=e=>{p.current&&!p.current.contains(e.target)&&u(!1)},a=e=>{e.changedTouches[0].clientX-e.changedTouches[e.changedTouches.length-1].clientX>50&&u(!1)};return document.addEventListener("click",e),document.addEventListener("touchend",a),()=>{document.removeEventListener("click",e),document.removeEventListener("touchend",a)}}),[]);const v=()=>{u(!d)};function j(e){u(!1),r("/".concat(o,"/dashboard/").concat(e))}return(0,l.jsx)("div",{className:"header-container",children:(0,l.jsxs)("header",{className:"dashboard-header ".concat(d?"menu-open":""),children:[(0,l.jsx)("div",{className:"dashboard-header-logo",children:(0,l.jsxs)("div",{className:"dashboard-logo",children:[(0,l.jsx)("span",{className:"dashboard-logo-icon",children:(0,l.jsx)("img",{src:"https://res.cloudinary.com/dnho57ne8/image/upload/v1699913993/brava_fqk4h4.png",alt:"Logo"})}),(0,l.jsx)("h1",{className:"logo-title",children:"Brava"})]})}),(0,l.jsx)("div",{className:"dashboard-header-navigation",children:(0,l.jsxs)("div",{className:"tabs",children:[(0,l.jsx)("button",{onClick:e=>j("overview"),className:"overview"===s?"active":"",children:(0,l.jsx)("a",{children:"Overview"})}),(0,l.jsx)("button",{onClick:e=>j("cards"),className:"cards"===s?"active":"",children:(0,l.jsx)("a",{children:" Cards"})}),(0,l.jsx)("button",{onClick:e=>j("account"),className:"account"===s?"active":"",children:(0,l.jsx)("a",{children:"Account"})}),(0,l.jsx)("button",{children:(0,l.jsx)("a",{href:"https://bravanfc.com",children:"Store"})})]})}),(0,l.jsx)("div",{className:"dashboard-header-actions",children:(0,l.jsxs)("button",{onClick:()=>j("account"),className:"user-profile",children:[(0,l.jsx)("span",{children:h}),(0,l.jsx)("span",{children:(0,l.jsx)("img",{src:x,alt:"User Avatar"})})]})}),m&&(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"dashboard-header-mobile",children:(0,l.jsx)(t.Z,{onClick:v})}),(0,l.jsxs)("div",{className:"mobile-menu ".concat(d?"open":""),children:[d&&(0,l.jsx)(i.Z,{onClick:v}),(0,l.jsx)("button",{onClick:e=>j("overview"),className:"overview"===s?"active":"",children:"Overview"}),(0,l.jsx)("button",{onClick:e=>j("cards"),className:"cards"===s?"active":"",children:"Cards"}),(0,l.jsx)("button",{onClick:e=>j("account"),className:"account"===s?"active":"",children:"Account"}),(0,l.jsx)("button",{onClick:e=>j("account"),className:"account"===s?"active":"",children:"Store"})]})]})]})})}},3342:(e,a,s)=>{s.r(a),s.d(a,{default:()=>o});var n=s(2791),t=s(7689),c=s(5294),i=s(8329),l=(s(9806),s(184));const o=e=>{let{setSubmissionSuccess:a}=e;const[s,o]=(0,n.useState)(1),[r,d]=(0,n.useState)("Profile Picture"),[u,m]=(0,n.useState)("Background Image"),[p,h]=(0,n.useState)({name:"",email:"",company:"",phone:"",position:"",instagram:"",url:"",facebook:"",linkedin:"",image:"",background_image:""}),x=(0,t.s0)(),{id:v}=(0,t.UO)();(0,n.useEffect)((()=>{i.Z.get("session_token")||x("/login")}),[x]),(0,n.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("formData"));e&&h(e)}),[]);const j=e=>{const{name:a,value:s}=e.target;h((e=>({...e,[a]:s})))},g=()=>{o(s+1)},f=()=>{o(s-1)};return(0,l.jsx)("div",{className:"createcard-container",children:(0,l.jsxs)("div",{className:"msform",children:[(0,l.jsxs)("ul",{id:"progressbar",children:[(0,l.jsx)("li",{className:s>=1?"active":"",children:"Card Setup"}),(0,l.jsx)("li",{className:s>=2?"active":"",children:"Social Media"}),(0,l.jsx)("li",{className:s>=3?"active":"",children:"Profile Picture"})]}),(0,l.jsxs)("form",{id:"msform",onSubmit:async e=>{e.preventDefault();const s=new FormData;s.append("name",p.name),s.append("email",p.email),s.append("company",p.company),s.append("position",p.position),s.append("phone",p.phone),s.append("instagram",p.instagram),s.append("facebook",p.facebook),s.append("linkedin",p.linkedin),s.append("url",p.url),s.append("profilePicture",p.profilePicture),s.append("background_image",p.background_image),s.append("userId",v);try{const e=await c.Z.post("https://".concat("app.bravanfc.com","/api/createcard"),s,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});201===e.status||204===e.status?(localStorage.removeItem("formData"),x("/".concat(e.data.userId,"/dashboard/cards")),a(!0)):(console.error("Error creating card:",e.data),alert("Error creating card"))}catch(n){console.log("Error creating card",n),alert("There was an error creating your card",n)}},encType:"multipart/form-data",children:[1===s&&(0,l.jsxs)("fieldset",{children:[(0,l.jsx)("h2",{className:"fs-title",children:"Personal data"}),(0,l.jsx)("input",{type:"text",name:"name",placeholder:"Name",value:p.name,onChange:j,required:!0}),(0,l.jsx)("input",{type:"text",name:"email",placeholder:"Email",value:p.email,onChange:j,required:!0}),(0,l.jsx)("input",{type:"text",name:"company",placeholder:"Company (optional)",value:p.company,onChange:j}),(0,l.jsx)("input",{type:"text",name:"position",placeholder:"Position (optional)",value:p.position,onChange:j}),(0,l.jsx)("input",{type:"tel",name:"phone",placeholder:"Phone",value:p.phone,onChange:j,required:!0}),(0,l.jsx)("input",{type:"button",name:"next",className:"next action-button",value:"Next",onClick:g})]}),2===s&&(0,l.jsxs)("fieldset",{children:[(0,l.jsx)("h2",{className:"fs-title",children:"Social Profiles"}),(0,l.jsx)("h3",{className:"fs-subtitle",children:"Your presence on the social network"}),(0,l.jsxs)("div",{className:"social-input-container",children:[(0,l.jsxs)("div",{className:"social-input",children:[(0,l.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/icons8-instagram.svg?v=1712083465",className:"social"}),(0,l.jsx)("input",{type:"text",name:"instagram",placeholder:"Instagram",value:p.instagram,onChange:j})]}),(0,l.jsxs)("div",{className:"social-input",children:[(0,l.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/icons8-facebook.svg?v=1712083465",className:"social"}),(0,l.jsx)("input",{type:"text",name:"facebook",placeholder:"Facebook",value:p.facebook,onChange:j})]}),(0,l.jsxs)("div",{className:"social-input",children:[(0,l.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/icons8-linkedin.svg?v=1712083465",className:"social"}),(0,l.jsx)("input",{type:"text",name:"linkedin",placeholder:"Linkedin",value:p.linkedin,onChange:j})]}),(0,l.jsxs)("div",{className:"social-input",children:[(0,l.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/url.png?v=1712083467",className:"social"}),(0,l.jsx)("input",{type:"text",name:"url",placeholder:"Url",value:p.url,onChange:j})]})]}),(0,l.jsx)("input",{type:"button",name:"previous",className:"previous action-button",value:"Previous",onClick:f}),(0,l.jsx)("input",{type:"button",name:"next",className:"next action-button",value:"Next",onClick:g})]}),3===s&&(0,l.jsxs)("fieldset",{children:[(0,l.jsx)("h2",{className:"fs-title",children:"Profile Picture"}),(0,l.jsx)("h3",{className:"fs-subtitle",children:"Upload your profile picture"}),(0,l.jsxs)("div",{className:"profile-picture-container",children:[(0,l.jsx)("input",{type:"file",name:"profilePicture",id:"profilePictureInput",accept:"image/*",onChange:e=>{const a=e.target.files[0];a?(d(a.name),h((e=>({...e,profilePicture:a})))):d("Background Image")},className:"file-input"}),(0,l.jsx)("label",{htmlFor:"profilePictureInput",className:"file-label",children:r})]}),(0,l.jsxs)("div",{className:"profile-picture-container",children:[(0,l.jsx)("input",{type:"file",name:"background_image",id:"backgroundImageInput",accept:"image/*",onChange:e=>{const a=e.target.files[0];a?(m(a.name),h((e=>({...e,background_image:a})))):m("Background Image")},className:"file-input"}),(0,l.jsx)("label",{htmlFor:"backgroundImageInput",className:"file-label",children:u})]}),(0,l.jsx)("input",{type:"button",name:"previous",className:"previous action-button",value:"Previous",onClick:f}),(0,l.jsx)("input",{type:"submit",name:"submit",className:"submit action-button",value:"Submit"})]})]})]})})}}}]);
//# sourceMappingURL=106.a704c912.chunk.js.map