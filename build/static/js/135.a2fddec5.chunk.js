"use strict";(self.webpackChunkbrava=self.webpackChunkbrava||[]).push([[135],{3712:(e,a,s)=>{s.r(a),s.d(a,{default:()=>b});var o=s(2791),t=s(7236),n=s(4484),l=s(4754),r=s(2057),c=s(184);const i=function(e){let{isOpen:a,onClose:s,id:o,card_id:t}=e;return(0,c.jsx)(c.Fragment,{children:a&&(0,c.jsx)("div",{className:"modal-overlay",onClick:s,children:(0,c.jsx)("div",{className:"qr-modal-content",children:(0,c.jsx)("div",{className:"qr-code-container",children:(0,c.jsx)(r.ZP,{value:"https://app.bravanfc.com/".concat(o,"/cards/").concat(t),size:256})})})})})};var d=s(830),p=s.n(d),h=s(9073),m=s(8152),g=s.n(m);const u=e=>{let{isOpen:a,closeModal:s,notes:o,background_image:t,loading:n,profile_image_url:l}=e;return(0,c.jsx)(c.Fragment,{children:a&&(0,c.jsxs)("div",{className:"note-modal",children:[(0,c.jsx)("div",{className:"note-modal-background",onClick:s}),(0,c.jsxs)("div",{className:"note-modal-content",children:[(0,c.jsx)("button",{className:"modal-close",onClick:s,children:"X"})," ",(0,c.jsx)("div",{className:"note-card-component-header",children:n?(0,c.jsx)("p",{children:"Loading..."}):(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("img",{className:"note-card-image",rel:"preload",loading:"lazy",src:l||"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/brava.jpg?v=1713204195",alt:"Profile"})})}),(0,c.jsxs)("div",{className:"note-box",children:[(0,c.jsx)("img",{src:t}),(0,c.jsx)("h1",{children:"Extra Information"}),(0,c.jsx)("p",{children:o})]})]})]})})};var f=s(7689),x=s(5294);const y=e=>{let{isOpen:a,onClose:s}=e;const[t,n]=(0,o.useState)({name:"",company:"",sector:"",phone:"",email:"",message:""}),{id:l}=(0,f.UO)(),r=e=>{const{name:a,value:s,type:o,checked:t}=e.target,l="checkbox"===o?t:s;n((e=>({...e,[a]:l})))};return(0,c.jsx)(c.Fragment,{children:a&&(0,c.jsx)("div",{className:"modal-overlay",children:(0,c.jsxs)("div",{className:"modal-content",children:[(0,c.jsx)("h2",{className:"modal-title",children:"Exchange Contact"}),(0,c.jsxs)("form",{onSubmit:e=>{e.preventDefault();const a={...t,terms:e.target.terms.checked};x.Z.post("https://".concat("app.bravanfc.com","/api/").concat(l,"/message"),a).then((e=>{console.log("Response Headers:",e.headers),200===e.status&&(alert("Message sent successfully"),n({name:"",company:"",sector:"",phone:"",email:"",message:"",terms:!1}))})).catch((e=>{console.log(e.response.status),console.log(e)})),console.log("Form submitted:",t),s()},children:[(0,c.jsx)("label",{htmlFor:"name",children:"Name:"}),(0,c.jsx)("input",{type:"text",id:"name",name:"name",placeholder:"",value:t.name,onChange:r,required:!0}),(0,c.jsx)("label",{htmlFor:"phone",children:"Phone:"}),(0,c.jsx)("input",{type:"phone",id:"phone",name:"phone",placeholder:"",value:t.phone,onChange:r,required:!0}),(0,c.jsx)("label",{htmlFor:"sector",children:"Sector:"}),(0,c.jsx)("input",{type:"sector",id:"sector",name:"sector",placeholder:"",value:t.sector,onChange:r,required:!0}),(0,c.jsx)("label",{htmlFor:"company",children:"Company:"}),(0,c.jsx)("input",{type:"text",id:"company",name:"company",placeholder:"",value:t.company,onChange:r,required:!0}),(0,c.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,c.jsx)("input",{type:"email",id:"email",name:"email",placeholder:"",value:t.email,onChange:r,required:!0}),(0,c.jsx)("label",{htmlFor:"message",children:"Message:"}),(0,c.jsx)("textarea",{id:"message",name:"message",placeholder:"What would you like to say?",value:t.message,onChange:r,required:!0}),(0,c.jsxs)("div",{className:"terms-container",children:[(0,c.jsx)("input",{type:"checkbox",id:"terms",name:"terms",required:!0}),(0,c.jsxs)("label",{htmlFor:"terms",children:["I agree to the ",(0,c.jsx)("a",{href:"/terms-and-conditions",target:"_blank",rel:"noopener noreferrer",children:"terms and conditions"})]})]}),(0,c.jsx)("button",{className:"submit-button",type:"submit",children:"Submit"}),(0,c.jsx)("button",{className:"close-button",onClick:s,children:"X"})]})]})})})},j=s.p+"static/media/googlereview.a0998f3f7fc14a058324.png";const b=function(e){let{card_id:a,id:s,email:d,username:m,phone:f,company:b,title:v,profile_image_url:k,background_image_url:w,onLoad:C,facebook:N,linkedin:R,instagram:I,google_reviews:S,address:U,youtube:z,notes:E,url:L,paypal:O,tiktok:_,twitter:F,spotify:B,vinted:T,standvirtual:q,olx:P,piscapisca:A,custojusto:K,linkId:D}=e;const[M,H]=(0,o.useState)(null),[X,Z]=(0,o.useState)(!0),[V,W]=(0,o.useState)(!1),[G,Y]=(0,o.useState)(!1),[J,Q]=(0,o.useState)(!1),$="AKIAS74Z5OF3T6XRC3LQ",ee="edp9S1WocubNwDRi8HlOlcGgPJK0w3tp1wRwMu0p",ae="eu-west-2",se="brava-bucket";let oe;const[te,ne]=(0,o.useState)({google_reviews:0,instagram:0,facebook:0,linkedin:0,youtube:0,paypal:0,twitter:0,tiktok:0,spotify:0,vinted:0,notes:0,address:0,standvirtual:0,olx:0,piscapisca:0,custojusto:0,url:0});(0,o.useEffect)((()=>{let e=!0;return(async()=>{const a=await re();if(e)if(a){const e=new Blob([a],{type:"image/jpg"});H(e),Z(!1)}else ce()})(),()=>{e=!1,M&&URL.revokeObjectURL(M)}}),[]);const le=async()=>{try{return await(0,h.X3)("brava-db",1,{upgrade(e){if(!e.objectStoreNames.contains("images")){e.createObjectStore("images",{keyPath:"key"}).createIndex("url","url",{unique:!0})}}})}catch(e){throw console.error("Error initializing IndexedDB:",e),e}},re=async()=>{try{const e=await le(),a=e.transaction("images").objectStore("images"),s=await a.get("profileImage");return s?s.data:null}catch(e){return console.error("Error loading from IndexedDB:",e),null}},ce=async()=>{try{const e=new t.S3({credentials:{accessKeyId:$,secretAccessKey:ee},region:ae}),a=new URL(k),s=decodeURIComponent(a.pathname.replace(/^\//,"")),o={Bucket:se,Key:s},l=new n.i(o),r=await e.send(l),c=new Blob([r.Body],{type:r.ContentType});(async e=>{try{const a=(await le()).transaction("images","readwrite"),s=a.objectStore("images"),o={key:"profileImage",url:k,data:e};s.put(o),await a.complete,console.log("Image stored in IndexedDB:",o)}catch(a){console.error("Error storing image in IndexedDB:",a)}})(c),H(c),Z(!1),C&&C()}catch(e){console.error("Error fetching image:",e)}};(0,o.useEffect)((()=>{let e=!0;return(async()=>{const e=await re();if(e){const a=new Blob([e],{type:"image/jpg"});H(a),Z(!1)}else ce()})(),()=>{e=!1,M&&URL.revokeObjectURL(M)}}),[k,se,ae,$,ee,C]);const ie=async e=>{try{const a=await fetch(e),s=await a.blob();return await de(s,{maxWidth:800,maxHeight:800,quality:.9})}catch(a){return console.error("Error fetching, resizing, and encoding image:",a),null}},de=async(e,a)=>{try{const s=new Image;s.src=URL.createObjectURL(e),await new Promise(((e,a)=>{s.onload=e,s.onerror=a}));const{maxWidth:o,maxHeight:t,quality:n}=a;let l=s.width,r=s.height;l>r?l>o&&(r*=o/l,l=o):r>t&&(l*=t/r,r=t);const c=document.createElement("canvas");c.width=l,c.height=r;c.getContext("2d").drawImage(s,0,0,l,r);const i=await new Promise((e=>{c.toBlob(e,"image/jpeg",n)})),d=await new Response(i).arrayBuffer();return btoa(new Uint8Array(d).reduce(((e,a)=>e+String.fromCharCode(a)),""))}catch(s){return console.error("Error resizing and compressing image:",s),null}},pe=async e=>{try{const a=new t.S3({region:"eu-west-2",credentials:{accessKeyId:$,secretAccessKey:ee}}),s={Bucket:"brava-bucket",Key:e,Expires:900},o=(0,l.e)(a,new n.i(s));return console.log(o),o}catch(a){throw console.error("Error generating pre-signed URL:",a),a}},he=e=>{const a={...te,[e]:te[e]+1};ne(a),x.Z.post("http://localhost:4001/api/".concat(D,"/leads"),a).then((e=>{console.log(e)})).catch((e=>{console.error("Error sending click counts:",e)}))};return(0,c.jsxs)("div",{className:"card-component ".concat(X?"loading":""),children:[(0,c.jsx)("div",{className:"card-background",style:{backgroundImage:"url(".concat(w||"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/brava_Front4-removebg-preview.png?v=1712164655",")")}}),(0,c.jsx)("div",{className:"card-component-header",children:X?(0,c.jsx)("p",{children:"Loading..."}):(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("img",{className:"card-image",rel:"preload",loading:"lazy",src:k||"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/brava.jpg?v=1713204195",alt:"Profile"})})}),(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("h5",{children:m}),(0,c.jsx)("h3",{children:(0,c.jsx)("span",{children:b})}),(0,c.jsx)("p",{children:v}),(0,c.jsxs)("div",{className:"card-buttons",children:[(0,c.jsx)("button",{onClick:async()=>{try{const e=new(p());if(!await re())return void console.error("Image not found in IndexedDB.");const o=e=>g().nfkd(e).replace(/[\u0300-\u036f]/g,""),t=o(decodeURIComponent(m)),n=o(decodeURIComponent(v)),l=o(decodeURIComponent(E)),r=o(decodeURIComponent(U));e.add("n",[t]),e.add("fn",[t]),e.add("org",b),e.add("tel",f),e.add("email",d),e.add("title",[n]),e.add("url","https://app.bravanfc.com/".concat(s,"/cards/").concat(a)),N&&e.add("x-socialprofile",N,{type:"Facebook"}),I&&e.add("x-socialprofile",I,{type:"Instagram"}),R&&e.add("x-socialprofile",R,{type:"Linkedin"}),z&&e.add("x-socialprofile",z,{type:"Youtube"}),E&&e.add("note",[l]),F&&e.add("x-socialprofile",F,{type:"Twitter"}),O&&e.add("x-socialprofile",O,{type:"Paypal"}),_&&e.add("x-socialprofile",_,{type:"TikTok"}),B&&e.add("x-socialprofile",B,{type:"Spotify"}),T&&e.add("x-socialprofile",T,{type:"Vinted"}),P&&e.add("x-social-profile",P,{type:"Olx"}),q&&e.add("x-social-profile",q,{type:"standvirtual"}),A&&e.add("x-social-profile",A,{type:"piscapisca"}),K&&e.add("x-social-profile",K,{type:"custojusto"}),e.add("adr",[r]);const c=new URL(k),i=decodeURIComponent(c.pathname.replace(/^\//,"")),h=await pe(i),u=await ie(h);if(!u)return void console.error("Error fetching and encoding image.");e.add("photo",u,{encoding:"b",type:"image/jpeg"});const x=e.toString("3.0");console.log(x);const y=new Blob([(new TextEncoder).encode(x)],{type:"text/vcard;charset=utf-8"}),j=document.createElement("a");j.href=URL.createObjectURL(y),j.download="contact.vcf",window.location.href=URL.createObjectURL(y),URL.revokeObjectURL(y)}catch(e){console.error("Error saving to contacts:",e)}},children:"SAVE CONTACT"}),(0,c.jsx)("button",{className:"fab",onClick:()=>{try{W(!0)}catch(e){console.error("Error opening modal:",e)}},children:"EXCHANGE CONTACT"})]}),(0,c.jsx)("div",{className:"social-icons-container",children:(0,c.jsxs)("div",{className:"social-icons",children:[(0,c.jsx)("div",{className:"qr-code-container",onClick:()=>{Y(!0)},children:(0,c.jsx)(r.ZP,{value:"https://app.bravanfc.com/".concat(s,"/cards/").concat(a),style:{height:"55px",width:"55px",borderRadius:"10px"}})}),L&&(0,c.jsx)("a",{href:L,onClick:()=>he("url"),children:(0,c.jsx)("img",{rel:"preload",className:"url",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/url.png?v=1712083467",alt:"Url",focusable:!0})}),S&&(0,c.jsx)("a",{href:S,onClick:()=>he("google_reviews"),children:(0,c.jsx)("img",{rel:"preload",loading:"lazy",src:j,alt:"Instagram",focusable:!0})}),I&&(0,c.jsx)("a",{href:I,onClick:()=>he("instagram"),children:(0,c.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/icons8-instagram.svg?v=1712083465",alt:"Instagram",focusable:!0})}),N&&(0,c.jsx)("a",{href:N,onClick:()=>he("facebook"),children:(0,c.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/icons8-facebook.svg?v=1712083465",alt:"Facebook",focusable:!0})}),R&&(0,c.jsx)("a",{href:R,onClick:()=>he("linkedin"),children:(0,c.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/icons8-linkedin.svg?v=1712083465",alt:"LinkedIn",focusable:!0})}),z&&(0,c.jsx)("a",{href:z,onClick:()=>he("youtube"),children:(0,c.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/icons8-youtube.svg?v=1712083465",alt:"YouTube",focusable:!0})}),O&&(0,c.jsx)("a",{href:O,onClick:()=>he("paypal"),children:(0,c.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/icons8-paypal.svg?v=1712083465",alt:"Paypal",focusable:!0})}),F&&(0,c.jsx)("a",{href:F,onClick:()=>he("twitter"),children:(0,c.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/icons8-twitterx.svg?v=1712083465",alt:"Twitter",focusable:!0})}),_&&(0,c.jsx)("a",{href:_,onClick:()=>he("tiktok"),children:(0,c.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/tiktok.png?v=1713213933",alt:"TikTok",focusable:!0,style:{height:"80px",width:"80px"}})}),B&&(0,c.jsx)("a",{href:B,onClick:()=>he("spotify"),children:(0,c.jsx)("img",{rel:"preload",className:"spotify",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/spotify.png?v=1712083467",alt:"Spotify",focusable:!0})}),T&&(0,c.jsx)("a",{href:T,onClick:()=>he("vinted"),children:(0,c.jsx)("img",{rel:"preload",className:"spotify",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/vinted.jpg?v=1712083466",alt:"Vinted",focusable:!0,style:{borderRadius:"20px"}})}),E&&(0,c.jsx)("a",{onClick:()=>he("notes"),children:(0,c.jsx)("img",{rel:"preload",loading:"lazy",style:{height:"60px"},src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/notes.png?v=1713213932",alt:"Notes",focusable:!0})}),U&&(0,c.jsx)("a",{href:oe,onClick:()=>he("address"),children:(0,c.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/icons8-google-maps-old.svg?v=1712083465",alt:"Maps",focusable:!0})}),q&&(0,c.jsx)("a",{href:q,onClick:()=>he("standvirtual"),children:(0,c.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/standvirtual.png?v=1713213933",style:{height:"60px",borderRadius:"10px"},alt:"standvirtual",focusable:!0})}),P&&(0,c.jsx)("a",{href:P,onClick:()=>he("olx"),children:(0,c.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/olx.png?v=1713213932",alt:"olx",focusable:!0,style:{height:"60px",borderRadius:"10px"}})}),A&&(0,c.jsx)("a",{href:A,onClick:()=>he("piscapisca"),children:(0,c.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/piscapisca.png?v=1713213932",alt:"piscapisca",focusable:!0,style:{height:"60px",borderRadius:"10px"}})}),K&&(0,c.jsx)("a",{href:K,onClick:()=>he("custojusto"),children:(0,c.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/custojusto.png?v=1713213932",alt:"custojusto",focusable:!0,style:{height:"60px",borderRadius:"10px"}})})]})})]}),(0,c.jsxs)("p",{style:{color:"white"},children:["Powered by ",(0,c.jsx)("a",{style:{color:"white"},href:"https://bravanfc.com",target:"_blank",children:"BRAVA"})]}),(0,c.jsx)(y,{isOpen:V,onClose:()=>{W(!1)}}),(0,c.jsx)(u,{isOpen:J,background_image:w,profile_image_url:k,closeModal:()=>{Q(!1)},notes:E}),(0,c.jsx)(i,{isOpen:G,onClose:()=>{Y(!1)},id:s,card_id:String(a)})]})}}}]);
//# sourceMappingURL=135.a2fddec5.chunk.js.map