"use strict";(self.webpackChunkbrava=self.webpackChunkbrava||[]).push([[150],{1287:(e,a,s)=>{s.r(a),s.d(a,{default:()=>x});var o=s(2791),l=s(7236),n=s(4484),t=s(4754),r=s(830),i=s.n(r),c=s(9073),d=s(8152),p=s.n(d),m=s(184);const g=e=>{let{isOpen:a,closeModal:s,notes:o,background_image:l,loading:n,profile_image_url:t}=e;return(0,m.jsx)(m.Fragment,{children:a&&(0,m.jsxs)("div",{className:"note-modal",children:[(0,m.jsx)("div",{className:"note-modal-background",onClick:s}),(0,m.jsxs)("div",{className:"note-modal-content",children:[(0,m.jsx)("button",{className:"modal-close",onClick:s,children:"X"})," ",(0,m.jsx)("div",{className:"note-card-component-header",children:n?(0,m.jsx)("p",{children:"Loading..."}):(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("img",{className:"note-card-image",rel:"preload",loading:"lazy",src:t||"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/brava.jpg?v=1713204195",alt:"Profile"})})}),(0,m.jsxs)("div",{className:"note-box",children:[(0,m.jsx)("img",{src:l}),(0,m.jsx)("h1",{children:"Extra Information"}),(0,m.jsx)("p",{children:o})]})]})]})})};var h=s(7689),f=s(5294);const u=e=>{let{isOpen:a,onClose:s}=e;const[l,n]=(0,o.useState)({name:"",company:"",email:"",message:""}),{id:t}=(0,h.UO)(),r=e=>{const{name:a,value:s}=e.target;n((e=>({...e,[a]:s})))};return(0,m.jsx)(m.Fragment,{children:a&&(0,m.jsx)("div",{className:"modal-overlay",children:(0,m.jsxs)("div",{className:"modal-content",children:[(0,m.jsx)("button",{className:"close-button",onClick:s,children:"X"}),(0,m.jsx)("h2",{children:"GET IN TOUCH"}),(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),f.Z.post("https://".concat("app.bravanfc.com","/api/").concat(t,"/message"),l).then((e=>{console.log("Response Headers:",e.headers),200===e.status&&(alert("Message sent successfully"),n({name:"",company:"",email:"",message:""}))})).catch((e=>{console.log(e.response.status),console.log(e)})),console.log("Form submitted:",l),s()},children:[(0,m.jsx)("label",{htmlFor:"name",children:"Name:"}),(0,m.jsx)("input",{type:"text",id:"name",name:"name",placeholder:"Name",value:l.name,onChange:r,required:!0}),(0,m.jsx)("label",{htmlFor:"company",children:"Company:"}),(0,m.jsx)("input",{type:"text",id:"company",name:"company",placeholder:"Company",value:l.company,onChange:r,required:!0}),(0,m.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,m.jsx)("input",{type:"email",id:"email",name:"email",placeholder:"Email",value:l.email,onChange:r,required:!0}),(0,m.jsx)("label",{htmlFor:"message",children:"Message:"}),(0,m.jsx)("textarea",{id:"message",name:"message",placeholder:"What would you like to say?",value:l.message,onChange:r,required:!0}),(0,m.jsx)("button",{type:"submit",children:"Submit"})]})]})})})},y=s.p+"static/media/googlereview.a0998f3f7fc14a058324.png";const x=function(e){let{card_id:a,id:s,email:r,username:d,phone:h,company:f,title:x,profile_image_url:j,background_image_url:b,onLoad:v,facebook:w,linkedin:k,instagram:C,google_reviews:N,address:I,youtube:U,notes:E,url:z,paypal:R,tiktok:L,twitter:S,spotify:O,vinted:T,standvirtual:F,olx:B,piscapisca:_,custojusto:A}=e;const[q,D]=(0,o.useState)(null),[K,M]=(0,o.useState)(!0),[P,H]=(0,o.useState)(!1),[X,W]=(0,o.useState)(!1);console.log(X);const V="AKIAS74Z5OF3SEUUXSFT",G="rJzM6aFnMC/riviirzTCFtLD7QHaDvaoWsXd9ER3",Y="eu-west-2",Z="brava-bucket";let J;(0,o.useEffect)((()=>{let e=!0;return(async()=>{const a=await $();if(e)if(a){const e=new Blob([a],{type:"image/jpg"});D(e),M(!1)}else ee()})(),()=>{e=!1,q&&URL.revokeObjectURL(q)}}),[]);const Q=async()=>{try{return await(0,c.X3)("brava-db",1,{upgrade(e){if(!e.objectStoreNames.contains("images")){e.createObjectStore("images",{keyPath:"key"}).createIndex("url","url",{unique:!0})}}})}catch(e){throw console.error("Error initializing IndexedDB:",e),e}},$=async()=>{try{const e=await Q(),a=e.transaction("images").objectStore("images"),s=await a.get("profileImage");return s?s.data:null}catch(e){return console.error("Error loading from IndexedDB:",e),null}},ee=async()=>{try{const e=new l.S3({credentials:{accessKeyId:V,secretAccessKey:G},region:Y}),a=new URL(j),s=decodeURIComponent(a.pathname.replace(/^\//,"")),o={Bucket:Z,Key:s},t=new n.i(o),r=await e.send(t),i=new Blob([r.Body],{type:r.ContentType});(async e=>{try{const a=(await Q()).transaction("images","readwrite"),s=a.objectStore("images"),o={key:"profileImage",url:j,data:e};s.put(o),await a.complete,console.log("Image stored in IndexedDB:",o)}catch(a){console.error("Error storing image in IndexedDB:",a)}})(i),D(i),M(!1),v&&v()}catch(e){console.error("Error fetching image:",e)}};(0,o.useEffect)((()=>{let e=!0;return(async()=>{const e=await $();if(e){const a=new Blob([e],{type:"image/jpg"});D(a),M(!1)}else ee()})(),()=>{e=!1,q&&URL.revokeObjectURL(q)}}),[j,Z,Y,V,G,v]);const ae=async e=>{try{const a=await fetch(e),s=await a.blob();return await se(s,{maxWidth:800,maxHeight:800,quality:.9})}catch(a){return console.error("Error fetching, resizing, and encoding image:",a),null}},se=async(e,a)=>{try{const s=new Image;s.src=URL.createObjectURL(e),await new Promise(((e,a)=>{s.onload=e,s.onerror=a}));const{maxWidth:o,maxHeight:l,quality:n}=a;let t=s.width,r=s.height;t>r?t>o&&(r*=o/t,t=o):r>l&&(t*=l/r,r=l);const i=document.createElement("canvas");i.width=t,i.height=r;i.getContext("2d").drawImage(s,0,0,t,r);const c=await new Promise((e=>{i.toBlob(e,"image/jpeg",n)})),d=await new Response(c).arrayBuffer();return btoa(new Uint8Array(d).reduce(((e,a)=>e+String.fromCharCode(a)),""))}catch(s){return console.error("Error resizing and compressing image:",s),null}},oe=async e=>{try{const a=new l.S3({region:"eu-west-2",credentials:{accessKeyId:V,secretAccessKey:G}}),s={Bucket:"brava-bucket",Key:e,Expires:900},o=(0,t.e)(a,new n.i(s));return console.log(o),o}catch(a){throw console.error("Error generating pre-signed URL:",a),a}};return(0,m.jsxs)("div",{className:"card-component ".concat(K?"loading":""),children:[(0,m.jsx)("div",{className:"card-background",style:{backgroundImage:"url(".concat(b||"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/brava_Front4-removebg-preview.png?v=1712164655",")")}}),(0,m.jsx)("div",{className:"card-component-header",children:K?(0,m.jsx)("p",{children:"Loading..."}):(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("img",{className:"card-image",rel:"preload",loading:"lazy",src:j||"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/brava.jpg?v=1713204195",alt:"Profile"})})}),(0,m.jsxs)("div",{className:"card-body",children:[(0,m.jsx)("h5",{children:x}),(0,m.jsx)("h3",{children:(0,m.jsx)("span",{children:f})}),(0,m.jsx)("p",{children:d}),(0,m.jsxs)("div",{className:"card-buttons",children:[(0,m.jsx)("button",{onClick:async()=>{try{const e=new(i());if(!await $())return void console.error("Image not found in IndexedDB.");const o=e=>p().nfkd(e).replace(/[\u0300-\u036f]/g,""),l=o(decodeURIComponent(d)),n=o(decodeURIComponent(x)),t=o(decodeURIComponent(E)),c=o(decodeURIComponent(I));e.add("n",[l]),e.add("fn",[l]),e.add("org",f),e.add("tel",h),e.add("email",r),e.add("title",[n]),e.add("url","https://app.bravanfc.com/".concat(s,"/cards/").concat(a)),w&&e.add("x-socialprofile",w,{type:"Facebook"}),C&&e.add("x-socialprofile",C,{type:"Instagram"}),k&&e.add("x-socialprofile",k,{type:"Linkedin"}),U&&e.add("x-socialprofile",U,{type:"Youtube"}),E&&e.add("note",[t]),S&&e.add("x-socialprofile",S,{type:"Twitter"}),R&&e.add("x-socialprofile",R,{type:"Paypal"}),L&&e.add("x-socialprofile",L,{type:"TikTok"}),O&&e.add("x-socialprofile",O,{type:"Spotify"}),T&&e.add("x-socialprofile",T,{type:"Vinted"}),B&&e.add("x-social-profile",B,{type:"Olx"}),F&&e.add("x-social-profile",F,{type:"standvirtual"}),_&&e.add("x-social-profile",_,{type:"piscapisca"}),A&&e.add("x-social-profile",A,{type:"custojusto"}),e.add("adr",[c]);const m=new URL(j),g=decodeURIComponent(m.pathname.replace(/^\//,"")),u=await oe(g),y=await ae(u);if(!y)return void console.error("Error fetching and encoding image.");e.add("photo",y,{encoding:"b",type:"image/jpeg"});const b=e.toString("3.0");console.log(b);const v=new Blob([(new TextEncoder).encode(b)],{type:"text/vcard;charset=utf-8"}),N=document.createElement("a");N.href=URL.createObjectURL(v),N.download="contact.vcf",window.location.href=URL.createObjectURL(v),URL.revokeObjectURL(v)}catch(e){console.error("Error saving to contacts:",e)}},children:"SAVE CONTACT"}),(0,m.jsx)("button",{className:"fab",onClick:()=>{try{H(!0)}catch(e){console.error("Error opening modal:",e)}},children:"EXCHANGE CONTACT"})]}),(0,m.jsxs)("div",{className:"social-icons",children:[z&&(0,m.jsx)("a",{href:z,children:(0,m.jsx)("img",{rel:"preload",className:"url",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/url.png?v=1712083467",alt:"Url",focusable:!0})}),N&&(0,m.jsx)("a",{href:N,children:(0,m.jsx)("img",{rel:"preload",loading:"lazy",src:y,alt:"Instagram",focusable:!0})}),C&&(0,m.jsx)("a",{href:C,children:(0,m.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/icons8-instagram.svg?v=1712083465",alt:"Instagram",focusable:!0})}),w&&(0,m.jsx)("a",{href:w,children:(0,m.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/icons8-facebook.svg?v=1712083465",alt:"Facebook",focusable:!0})}),k&&(0,m.jsx)("a",{href:k,children:(0,m.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/icons8-linkedin.svg?v=1712083465",alt:"LinkedIn",focusable:!0})}),U&&(0,m.jsx)("a",{href:U,children:(0,m.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/icons8-youtube.svg?v=1712083465",alt:"YouTube",focusable:!0})}),R&&(0,m.jsx)("a",{href:R,children:(0,m.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/icons8-paypal.svg?v=1712083465",alt:"Paypal",focusable:!0})}),S&&(0,m.jsx)("a",{href:S,children:(0,m.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/icons8-twitterx.svg?v=1712083465",alt:"Twitter",focusable:!0})}),L&&(0,m.jsx)("a",{href:L,children:(0,m.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/tiktok.png?v=1713213933",alt:"TikTok",focusable:!0})}),O&&(0,m.jsx)("a",{href:O,children:(0,m.jsx)("img",{rel:"preload",className:"spotify",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/spotify.png?v=1712083467",alt:"Spotify",focusable:!0})}),T&&(0,m.jsx)("a",{href:T,children:(0,m.jsx)("img",{rel:"preload",className:"spotify",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/vinted.jpg?v=1712083466",alt:"Vinted",focusable:!0})}),E&&(0,m.jsx)("a",{onClick:()=>{W(!0)},children:(0,m.jsx)("img",{rel:"preload",loading:"lazy",style:{marginBottom:"10px"},src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/notes.png?v=1713213932",alt:"Notes",focusable:!0})}),I&&(0,m.jsx)("a",{href:J,onClick:()=>{J="https://www.google.com/maps/search/?api=1&query=".concat(I),window.open(J,"_blank")},children:(0,m.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/icons8-google-maps-old.svg?v=1712083465",alt:"Maps",focusable:!0})}),F&&(0,m.jsx)("a",{href:F,children:(0,m.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/standvirtual.png?v=1713213933",alt:"standvirtual",focusable:!0})}),B&&(0,m.jsx)("a",{href:B,children:(0,m.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/olx.png?v=1713213932",alt:"olx",focusable:!0})}),_&&(0,m.jsx)("a",{href:_,children:(0,m.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/piscapisca.png?v=1713213932",alt:"piscapisca",focusable:!0})}),A&&(0,m.jsx)("a",{href:A,children:(0,m.jsx)("img",{rel:"preload",loading:"lazy",src:"https://cdn.shopify.com/s/files/1/0733/7767/7577/files/custojusto.png?v=1713213932",alt:"custojusto",focusable:!0})})]})]}),(0,m.jsx)(u,{isOpen:P,onClose:()=>{H(!1)}}),(0,m.jsx)(g,{isOpen:X,background_image:b,profile_image_url:j,closeModal:()=>{W(!1)},notes:E})]})}}}]);
//# sourceMappingURL=150.618bfb7b.chunk.js.map