{"version":3,"file":"static/js/966.41e21a1b.chunk.js","mappings":"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","sources":["pages/Signup/signup.js","../node_modules/js-cookie/dist/js.cookie.mjs"],"sourcesContent":["import { Link, useNavigate } from \"react-router-dom\";\r\nimport { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport Cookies from \"js-cookie\";\r\nimport \"./signup.css\"\r\n\r\n\r\nfunction Signup () {\r\n\r\n    const [name, setName] = useState();\r\n    const [email, setEmail] = useState();\r\n    const [password, setPassword]= useState();\r\n    const [passwordVerify, setPasswordVerify] = useState();\r\n    const [phone, setPhone] = useState();\r\n    const [error, setError] = useState(\"\");\r\n    const navigate = useNavigate();\r\n\r\n    const handleSubmit = async(e) => {\r\n        e.preventDefault(); //prevents page from refreshing after form submition\r\n\r\n        if(!e.target || !e.target.elements) {\r\n            console.log('Form or elements not found');\r\n            return;\r\n        }\r\n\r\n\r\n        // Attempt at getting form elems. Providing default values for safety.\r\n        const name = e.target.elements.name ? e.target.elements.name.value : '';\r\n        const email = e.target.elements.email ? e.target.elements.email.value : '';\r\n        const password = e.target.elements.password ? e.target.elements.password.value : \"\";\r\n        const passwordVerify = e.target.elements.passwordVerify ? e.target.elements.passwordVerify.value : \"\";\r\n        const phone = e.target.elements.phone ? e.target.elements.phone.value : \"\";\r\n\r\n\r\n        if(name.trim() === \"\" || email.trim() === \"\" || password.trim() === \"\" || passwordVerify.trim() === \"\" || phone.trim() === \"\"){\r\n            alert(\"Preencha todos os campos, por favor!\");\r\n            return;\r\n        } \r\n        else if(password.trim() !== passwordVerify.trim() ){\r\n            alert(\"As palavras-passe têm de ser iguais\");\r\n            return;\r\n        }\r\n        else {\r\n            try{\r\n            axios.post(`https://${process.env.REACT_APP_HOST}/api/sign-up`, {\r\n                username: name,\r\n                email: email,\r\n                password: password,\r\n                passwordVerify: passwordVerify,\r\n                phone: phone\r\n            }).then((res) => {\r\n                const {  token } = res.data; // Destructure user and token from the response\r\n                document.cookie = `Session_Token=${token}; Secure; HttpOnly; max-age=max-age-in-seconds; SameSite=None`;\r\n                console.log(token)\r\n                navigate(`/${res.data.userId}/dashboard`);\r\n                // TODO mudar route para /id/dashboard\r\n            }).catch((err) => {\r\n                console.log(\"AXIOS error\", err);\r\n            })\r\n        } catch (error){\r\n            if (error.response) {\r\n                // The request was made and the server responded with a status code\r\n                // that falls out of the range of 2xx\r\n                if (error.response.status === 409) {\r\n                    console.log(\"um user com este username ja existe\")\r\n                  setError(\"Um utilizador com este email já existe.\");\r\n                } else {\r\n                  setError(\"Erro de servidor. Tente novamente mais tarde.\");\r\n                }\r\n              } else if (error.request) {\r\n                // The request was made but no response was received\r\n                setError(\"Sem resposta do servidor. Tente novamente mais tarde.\");\r\n              } else {\r\n                // Something happened in setting up the request that triggered an Error\r\n                setError(\"Erro na requisição. Tente novamente mais tarde.\");\r\n              }\r\n        }\r\n        }\r\n    }\r\n    \r\nreturn(\r\n    \r\n    <div className=\"signup-container\">\r\n        <Link to=\"/signup\"></Link>\r\n        <h1 className=\"welcome\">Bem vindo à Brava</h1>\r\n            <div className=\"card\">\r\n                <img className=\"logo\" src=\"https://res.cloudinary.com/dnho57ne8/image/upload/v1699913993/brava_fqk4h4.png\" />\r\n                <h2>Vamos começar por criar uma conta!</h2>\r\n                    <form className=\"form\" onSubmit={handleSubmit}>\r\n                        <input type=\"text\" placeholder=\"Nome\" name=\"name\" id=\"name\" onChange={e => setName(e.target.value)} value={name}/>\r\n                        <input type=\"email\"placeholder=\"Email\"  name=\"email\" id=\"email\" onChange={e => setEmail(e.target.value)} value={email} />\r\n                        <input type=\"tel\" placeholder=\"Telemovel\" name=\"phone\" id=\"phone\" onChange={e => setPhone(e.target.value)} value={phone}/>\r\n                        <input type=\"password\" placeholder=\"Password\" name=\"password\" id=\"password\" onChange={e => setPassword(e.target.value)} value={password} />\r\n                        <input type=\"password\" placeholder=\"Verificar Password\" name=\"passwordVerify\" id=\"passworVerify\" onChange={e => setPasswordVerify(e.target.value)} value={passwordVerify} />\r\n                        <button type=\"submit\">Criar Conta</button>\r\n                        <p className=\"existing-users-text\">Existing users, sign in</p>\r\n                        <a onClick={()=> navigate(\"/login\")}> here</a>\r\n                    </form>\r\n                 \r\n            </div>\r\n    </div>\r\n)   \r\n}\r\nexport default Signup;\r\n","/*! js-cookie v3.0.5 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (name, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    name = encodeURIComponent(name)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      name + '=' + converter.write(value, name) + stringifiedAttributes)\n  }\n\n  function get (name) {\n    if (typeof document === 'undefined' || (arguments.length && !name)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var found = decodeURIComponent(parts[0]);\n        jar[found] = converter.read(value, found);\n\n        if (name === found) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return name ? jar[name] : jar\n  }\n\n  return Object.create(\n    {\n      set,\n      get,\n      remove: function (name, attributes) {\n        set(\n          name,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport { api as default };\n"],"names":["name","setName","useState","email","setEmail","password","setPassword","passwordVerify","setPasswordVerify","phone","setPhone","error","setError","navigate","useNavigate","_jsxs","className","children","_jsx","Link","to","src","onSubmit","async","e","preventDefault","target","elements","console","log","value","trim","axios","post","concat","process","username","then","res","token","data","document","cookie","userId","catch","err","response","status","request","alert","type","placeholder","id","onChange","onClick","assign","i","arguments","length","source","key","api","init","converter","defaultAttributes","set","attributes","expires","Date","now","toUTCString","encodeURIComponent","replace","decodeURIComponent","escape","stringifiedAttributes","attributeName","split","write","Object","create","get","cookies","jar","parts","slice","join","found","read","remove","withAttributes","this","withConverter","freeze","path"],"sourceRoot":""}