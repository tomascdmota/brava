{"version":3,"file":"static/js/290.89f6f067.chunk.js","mappings":"sKAKA,MAAMA,GAAgBC,EAAAA,EAAAA,OAAK,IAAM,wDAkEjC,QAhEA,WACE,MAAQC,GAAIC,IAAWC,EAAAA,EAAAA,OAChBC,EAAUC,IAAeC,EAAAA,EAAAA,UAAS,OAClCC,EAAOC,IAAYF,EAAAA,EAAAA,UAAS,KAC5BG,EAAQC,IAAaJ,EAAAA,EAAAA,UAAS,KAC9BK,EAASC,IAAcN,EAAAA,EAAAA,WAAS,IAChCO,EAAOC,IAAYR,EAAAA,EAAAA,UAAS,MAkCnC,OA/BAS,EAAAA,EAAAA,YAAU,KACRH,GAAW,GACXI,EAAAA,EACGC,IAAI,WAADC,OAAYC,eAA0B,SAAAD,OAAQhB,EAAM,WACvDkB,MAAMC,IACLhB,EAAYgB,EAASC,MACrBd,EAASa,EAASC,KAAKf,OACvBG,EAAUW,EAASC,KAAKb,QAGHY,EAASC,KAAKf,MAAMgB,KAAKC,GAASA,EAAKC,oBAE/CC,SAASC,IACpB,MAAMC,EAAcC,SAASC,cAAc,QAC3CF,EAAYG,KAAOJ,EACnBC,EAAYI,IAAM,UAClBJ,EAAYK,GAAK,QACjBJ,SAASK,KAAKC,YAAYP,EAAY,GACtC,IAEHQ,OAAOvB,IACNwB,QAAQxB,MAAM,wBAAyBA,GACvCC,EAASD,EAAMyB,QAAQ,IAExBC,SAAQ,KACP3B,GAAW,EAAM,GACjB,GAGH,CAACV,IAEAS,GAEA6B,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kBAAiBC,SAAA,EAC9BC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,gBACJC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,oBAAmBC,UAACC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,kBAMtDE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,kBAAiBC,UAC9BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,UACxBC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,QAAOC,SACnBnC,EAAMgB,KAAKC,IACVmB,EAAAA,EAAAA,KAACC,EAAAA,SAAQ,CAAoBC,UAAUF,EAAAA,EAAAA,KAAA,OAAAD,SAAK,oBAAsBA,UAChEC,EAAAA,EAAAA,KAAC5C,EAAa,CAACU,OAAQA,KAAYe,KADtBA,EAAKsB,gBAQhC,C","sources":["pages/Card/Card.js"],"sourcesContent":["import React, { useEffect, useState, lazy, Suspense } from 'react';\r\nimport { useParams, useNavigate } from 'react-router';\r\nimport axios from 'axios';\r\n\r\nimport './Card.scss';\r\nconst CardComponent = lazy(() => import('./CardComponent/CardComponent'));\r\n\r\nfunction Cards() {\r\n  const { id: userId } = useParams();\r\n  const [userData, setUserData] = useState(null); // Initialize as null\r\n  const [cards, setCards] = useState([]);\r\n  const [linkId, setLinkId] = useState('')\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null); // State for error handling\r\n\r\n\r\n  useEffect(() => {\r\n    setLoading(true)\r\n    axios\r\n      .get(`https://${process.env.REACT_APP_HOST}/api/${userId}/cards`)\r\n      .then((response) => {\r\n        setUserData(response.data);\r\n        setCards(response.data.cards);\r\n        setLinkId(response.data.linkId);\r\n  \r\n        // Preload LCP image\r\n        const lcpImageUrls = response.data.cards.map((card) => card.profile_image_url);\r\n  \r\n        lcpImageUrls.forEach((imageUrl) => {\r\n          const preloadLink = document.createElement('link');\r\n          preloadLink.href = imageUrl;\r\n          preloadLink.rel = 'preload';\r\n          preloadLink.as = 'image';\r\n          document.head.appendChild(preloadLink);\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error fetching cards:', error);\r\n        setError(error.message);\r\n      })\r\n      .finally(() => {\r\n        setLoading(false); // Set loading to false regardless of success or failure\r\n      });\r\n\r\n\r\n  }, [userId]);\r\n  // Render loading indicator while data is being fetched\r\n  if (loading) {\r\n    return (\r\n      <div className=\"cards-container\">\r\n        <h1>Loading...</h1>\r\n        <div className=\"spinner-container\"><div className=\"spinner\"></div></div>\r\n      </div>\r\n    );\r\n  }\r\n  // Once data is fetched, render the page with the fetched data\r\n  return (\r\n    <div className=\"cards-container\">\r\n      <div className=\"nav-tiles\">\r\n        <div className=\"tiles\">\r\n          {cards.map((card) => (\r\n            <Suspense key={card.card_id} fallback={<div>Loading card...</div>}>\r\n              <CardComponent linkId={linkId} {...card} />\r\n            </Suspense>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Cards;\r\n"],"names":["CardComponent","lazy","id","userId","useParams","userData","setUserData","useState","cards","setCards","linkId","setLinkId","loading","setLoading","error","setError","useEffect","axios","get","concat","process","then","response","data","map","card","profile_image_url","forEach","imageUrl","preloadLink","document","createElement","href","rel","as","head","appendChild","catch","console","message","finally","_jsxs","className","children","_jsx","Suspense","fallback","card_id"],"sourceRoot":""}